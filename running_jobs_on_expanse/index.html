
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sdsc-scicomp.github.io/expanse-docs/running_jobs_on_expanse/">
      
      
        <link rel="prev" href="../compiling_codes/">
      
      
        <link rel="next" href="../using_gpu_nodes/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Running Jobs on Expanse - Expanse Supercomputer User Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#running-jobs-on-expanse" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Expanse Supercomputer User Guide" class="md-header__button md-logo" aria-label="Expanse Supercomputer User Guide" data-md-component="logo">
      
  <img src="../assets/SDSC gold white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Expanse Supercomputer User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Running Jobs on Expanse
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/sdsc-scicomp/expanse-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Expanse Supercomputer User Guide" class="md-nav__button md-logo" aria-label="Expanse Supercomputer User Guide" data-md-component="logo">
      
  <img src="../assets/SDSC gold white.png" alt="logo">

    </a>
    Expanse Supercomputer User Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sdsc-scicomp/expanse-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical_summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technical Summary
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../system_access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Access
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../account_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Account Management
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../job_charging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Charging
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../compiling_codes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compiling Codes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Running Jobs on Expanse
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Running Jobs on Expanse
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requesting-interactive-resources-using-srun" class="md-nav__link">
    <span class="md-ellipsis">
      Requesting interactive resources using srun
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submitting-jobs-using-sbatch" class="md-nav__link">
    <span class="md-ellipsis">
      Submitting Jobs Using sbatch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Submitting Jobs Using sbatch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-mpi-job" class="md-nav__link">
    <span class="md-ellipsis">
      Basic MPI Job
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-openmp-job" class="md-nav__link">
    <span class="md-ellipsis">
      Basic OpenMP Job
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic OpenMP Job">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hybrid-mpi-openmp-job" class="md-nav__link">
    <span class="md-ellipsis">
      Hybrid MPI-OpenMP Job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-shared-partition" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Shared Partition
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-large-memory-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Using Large Memory Nodes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_gpu_nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using GPU Nodes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_movement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Movement
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../composable_systems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Composable Systems
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../software/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../citations_and_publications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Citations and Publications
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requesting-interactive-resources-using-srun" class="md-nav__link">
    <span class="md-ellipsis">
      Requesting interactive resources using srun
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submitting-jobs-using-sbatch" class="md-nav__link">
    <span class="md-ellipsis">
      Submitting Jobs Using sbatch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Submitting Jobs Using sbatch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-mpi-job" class="md-nav__link">
    <span class="md-ellipsis">
      Basic MPI Job
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-openmp-job" class="md-nav__link">
    <span class="md-ellipsis">
      Basic OpenMP Job
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic OpenMP Job">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hybrid-mpi-openmp-job" class="md-nav__link">
    <span class="md-ellipsis">
      Hybrid MPI-OpenMP Job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-shared-partition" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Shared Partition
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-large-memory-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Using Large Memory Nodes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/sdsc-scicomp/expanse-docs/edit/main/docs/running_jobs_on_expanse.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="running-jobs-on-expanse">Running Jobs on Expanse</h1>
<p>Expanse uses the <strong>Simple Linux Utility for Resource Management (SLURM)</strong> batch environment. When you run in the batch mode, you submit jobs to be run on the compute nodes using the sbatch command as described below. <em>Remember that computationally intensive jobs should be run only on the compute nodes and not the login nodes.</em></p>
<p>Expanse places limits on the number of jobs queued and running on a per group (allocation) and partition basis. Please note that submitting a large number of jobs (especially very short ones) can impact the overall scheduler response for all users. <strong>If you are anticipating submitting a lot of jobs, please contact the SDSC consulting staff before you submit them. We can work to check if there are bundling options that make your workflow more efficient and reduce the impact on the scheduler.</strong></p>
<p>The limits for each partition are noted in the table below. <em>Partition limits are subject to change based on Early User Period evaluation.</em></p>
<table>
<thead>
<tr>
<th>Partition Name</th>
<th>Max Walltime</th>
<th>Max Nodes/Job</th>
<th>Max Running Jobs</th>
<th>Max Running + Queued Jobs</th>
<th>Charge Factor</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>compute</td>
<td>48 hrs</td>
<td>32</td>
<td>32</td>
<td>64</td>
<td>1</td>
<td>Exclusive access to regular compute nodes; <em>limit applies per group</em></td>
</tr>
<tr>
<td>ind-compute</td>
<td>48 hrs</td>
<td>32</td>
<td>16</td>
<td>32</td>
<td>1</td>
<td>Exclusive access to Industry compute nodes; <em>limit applies per group</em></td>
</tr>
<tr>
<td>shared</td>
<td>48 hrs</td>
<td>1</td>
<td>4096</td>
<td>4096</td>
<td>1</td>
<td>Single-node jobs using fewer than 128 cores</td>
</tr>
<tr>
<td>ind-shared</td>
<td>48 hrs</td>
<td>1</td>
<td>2048</td>
<td>2048</td>
<td>1</td>
<td>Single-node Industry jobs using fewer than 128 cores</td>
</tr>
<tr>
<td>gpu</td>
<td>48 hrs</td>
<td>4</td>
<td>4</td>
<td>8 (32 Tres GPU)</td>
<td>1</td>
<td>Used for exclusive access to the GPU nodes</td>
</tr>
<tr>
<td>ind-gpu</td>
<td>48 hrs</td>
<td>4</td>
<td>4</td>
<td>4 (8 Tres GPU)</td>
<td>1</td>
<td>Exclusive access to the Industry GPU nodes</td>
</tr>
<tr>
<td>gpu-shared</td>
<td>48 hrs</td>
<td>1</td>
<td>24</td>
<td>24 (24 Tres GPU)</td>
<td>1</td>
<td>Single-node job using fewer than 4 GPUs</td>
</tr>
<tr>
<td>ind-gpu-shared</td>
<td>48 hrs</td>
<td>1</td>
<td>24</td>
<td>24 (24 Tres GPU)</td>
<td>1</td>
<td>Single-node job using fewer than 4 Industry GPUs</td>
</tr>
<tr>
<td>large-shared</td>
<td>48 hrs</td>
<td>1</td>
<td>1</td>
<td>4</td>
<td>1</td>
<td>Single-node jobs using large memory up to 2 TB (minimum memory required 256G)</td>
</tr>
<tr>
<td>debug</td>
<td>30 min</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>1</td>
<td>Priority access to shared nodes set aside for testing of jobs with short walltime and limited resources</td>
</tr>
<tr>
<td>gpu-debug</td>
<td>30 min</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>1</td>
<td>Priority access to gpu-shared nodes set aside for testing of jobs with short walltime and limited resources; <em>max two gpus per job</em></td>
</tr>
<tr>
<td>preempt</td>
<td>7 days</td>
<td>32</td>
<td></td>
<td>128</td>
<td>.8</td>
<td>Non-refundable discounted jobs to run on free nodes that can be pre-empted by jobs submitted to any other queue</td>
</tr>
<tr>
<td>gpu-preempt</td>
<td>7 days</td>
<td>1</td>
<td></td>
<td>24 (24 Tres GPU)</td>
<td>.8</td>
<td>Non-refundable discounted jobs to run on unallocated nodes that can be pre-empted by higher priority queues</td>
</tr>
</tbody>
</table>
<h3 id="requesting-interactive-resources-using-srun">Requesting interactive resources using srun</h3>
<p>You can request an interactive session using the srun command. The following example will request one regular compute node, 4 cores, in the debug partition for 30 minutes.</p>
<p>srun --partition=debug  --pty --account=&lt;<project>&gt; --nodes=1 --ntasks-per-node=4 \
        --mem=8G -t 00:30:00 --wait=0 --export=ALL /bin/bash</p>
<p>The following example will request a GPU node, 10 cores, 1 GPU and 96G in the debug partition for 30 minutes. To ensure the GPU environment is properly loaded, please be sure run both the <code>module purge</code> and <code>module restore</code> commands.</p>
<pre><code class="language-bash">login01$ srun --partition=gpu-debug --pty --account=&lt;&lt;project&gt;&gt; --ntasks-per-node=10 \
    --nodes=1 --mem=96G --gpus=1 -t 00:30:00 --wait=0 --export=ALL /bin/bash

srun: job 1336890 queued and waiting for resources

srun: job 1336890 has been allocated resources
exp-7-59$ module purge
exp-7-59$ module restore

Resetting modules to system default. Resetting $MODULEPATH back to system default.
    All extra directories will be removed from $MODULEPATH.
</code></pre>
<h3 id="submitting-jobs-using-sbatch">Submitting Jobs Using sbatch</h3>
<p>Jobs can be submitted to the sbatch partitions using the sbatch command as follows:</p>
<pre><code class="language-bash">sbatch jobscriptfile
</code></pre>
<p>where <code>jobscriptfile</code> is the name of a UNIX format file containing special statements (corresponding to sbatch options), resource specifications and shell commands. Several example SLURM scripts are given below:</p>
<h4 id="basic-mpi-job">Basic MPI Job</h4>
<pre><code class="language-bash">#!/bin/bash
#SBATCH --job-name=&quot;hellompi&quot;
#SBATCH --output=&quot;hellompi.%j.%N.out&quot;
#SBATCH --partition=compute
#SBATCH --nodes=2
#SBATCH --ntasks-per-node=128
#SBATCH --mem=0
#SBATCH --account=&lt;&lt;project*&gt;&gt;
#SBATCH --export=ALL
#SBATCH -t 01:30:00

#This job runs with 2 nodes, 128 cores per node for a total of 256 tasks.

module purge
module load cpu
#Load module file(s) into the shell environment
module load gcc
module load mvapich2
module load slurm

srun --mpi=pmi2 -n 256 ../hello_mpi
</code></pre>
<ul>
<li><em>Expanse requires users to enter a valid project name; users can list valid project by running the<code>expanse-client</code> script.</em></li>
<li><em>Expanse requires users to include memory , by using --mem=0 for compute partition the job will be allocated all the avialble memory on the node</em></li>
</ul>
<h3 id="basic-openmp-job">Basic OpenMP Job</h3>
<pre><code class="language-bash">#!/bin/bash
#SBATCH --job-name=&quot;hello_openmp&quot;
#SBATCH --output=&quot;hello_openmp.%j.%N.out&quot;
#SBATCH --partition=compute
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=24
#SBATCH --mem=249000M
#SBATCH --account=&lt;&lt;project*&gt;&gt;
#SBATCH --export=ALL
#SBATCH -t 01:30:00

module purge
module load cpu
module load slurm
module load gcc
module load openmpi

#SET the number of openmp threads
export OMP_NUM_THREADS=24

#Run the job
./hello_openmp
</code></pre>
<p><em>* Expanse requires users to enter a valid project name; users can list valid project by running the<code>expanse-client</code> script.</em></p>
<h4 id="hybrid-mpi-openmp-job">Hybrid MPI-OpenMP Job</h4>
<pre><code class="language-bash">#!/bin/bash
#SBATCH --job-name=&quot;hellohybrid&quot;
#SBATCH --output=&quot;hellohybrid.%j.%N.out&quot;
#SBATCH --partition=compute
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=128
#SBATCH --cpus-per-task=16
#SBATCH --mem=249000M
#SBATCH --account=&lt;&lt;project*&gt;&gt;
#SBATCH --export=ALL
#SBATCH -t 01:30:00

#This job runs with 1 node, 128 cores per node for a total of 128 cores.
# We use 8 MPI tasks and 16 OpenMP threads per MPI task

module purge
module load cpu
module load slurm
module load intel
module load intel-mpi

export OMP_NUM_THREADS=$SLURM_CPUS_PER_TASK
mpirun -genv I_MPI_PIN_DOMAIN=omp:compact ./hello_hybrid
</code></pre>
<p><em>* Expanse require users to enter a valid project name; users can list valid project by running the<code>expanse-client</code> script.</em></p>
<h4 id="using-the-shared-partition">Using the Shared Partition</h4>
<pre><code class="language-bash">#!/bin/bash
#SBATCH -p shared
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=8
#SBATCH --mem=40G
#SBATCH -t 01:00:00
#SBATCH -J job.8
#SBATCH -A &lt;&lt;project*&gt;&gt;
#SBATCH -o job.8.%j.%N.out
#SBATCH -e job.8.%j.%N.err
#SBATCH --export=ALL

export SLURM_EXPORT_ENV=ALL

module purge
module load cpu
module load gcc
module load mvapich2
module load slurm

srun -n 8 ../hello_mpi
</code></pre>
<p><em>* Expanse requires users to enter a valid project name; users can list valid project by running the<code>expanse-client</code> script.</em>
The above script will run using 8 cores and 40 GB of memory. Please note that the performance in the shared partition may vary depending on how sensitive your application is to memory locality and the cores you are assigned by the scheduler. It is possible the 8 cores will span two sockets for example.</p>
<h3 id="using-large-memory-nodes">Using Large Memory Nodes</h3>
<p>The large memory nodes can be accessed via the "large-shared" partition. Charges are based on either the number of cores or the fraction of the memory requested, whichever is larger. By default the system will only allocate 1 GB of memory per core. If additional memory is required, users should explicitly use the <code>--mem</code> directive.
For example, on the "large-shared" partition, the following job requesting 128 cores and 2000 GB of memory (about 100% of 2TB of one node's available memory) for 1 hour will be charged 1024 SUs:
200/1455(memory) * 64(cores) * 1(duration) ~= 1024</p>
<pre><code class="language-bash">#SBATCH --partition=large-shared
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=128
#SBATCH --cpus-per-task=1
#SBATCH --mem=2055638M

export OMP_PROC_BIND='true'
</code></pre>
<p>While there is not a separate 'large' partition, a job can still explicitly request all of the resources on a large memory node. Please note that there is no premium for using <em>Expanse</em> 's large memory nodes. Users are advised to request the large nodes only if they need the extra memory.</p>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../javascripts/extra.js"></script>
      
    
  </body>
</html>