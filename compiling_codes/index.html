
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sdsc-scicomp.github.io/expanse-docs/compiling_codes/">
      
      
        <link rel="prev" href="../job_charging/">
      
      
        <link rel="next" href="../running_jobs_on_expanse/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Compiling Codes - Expanse Supercomputer User Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#compiling-codes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Expanse Supercomputer User Guide" class="md-header__button md-logo" aria-label="Expanse Supercomputer User Guide" data-md-component="logo">
      
  <img src="../assets/SDSC gold white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Expanse Supercomputer User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Compiling Codes
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/sdsc-scicomp/expanse-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Expanse Supercomputer User Guide" class="md-nav__button md-logo" aria-label="Expanse Supercomputer User Guide" data-md-component="logo">
      
  <img src="../assets/SDSC gold white.png" alt="logo">

    </a>
    Expanse Supercomputer User Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sdsc-scicomp/expanse-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical_summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technical Summary
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../system_access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Access
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../account_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Account Management
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../job_charging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Charging
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Compiling Codes
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Compiling Codes
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-amd-compilers" class="md-nav__link">
    <span class="md-ellipsis">
      Using AMD Compilers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-intel-compilers" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Intel Compilers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-pgi-compilers" class="md-nav__link">
    <span class="md-ellipsis">
      Using the PGI Compilers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-gnu-compilers" class="md-nav__link">
    <span class="md-ellipsis">
      Using the GNU Compilers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes-and-hints" class="md-nav__link">
    <span class="md-ellipsis">
      Notes and Hints
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../running_jobs_on_expanse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running Jobs on Expanse
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_gpu_nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using GPU Nodes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_movement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Movement
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../composable_systems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Composable Systems
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../software/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../citations_and_publications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Citations and Publications
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-amd-compilers" class="md-nav__link">
    <span class="md-ellipsis">
      Using AMD Compilers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-intel-compilers" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Intel Compilers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-pgi-compilers" class="md-nav__link">
    <span class="md-ellipsis">
      Using the PGI Compilers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-gnu-compilers" class="md-nav__link">
    <span class="md-ellipsis">
      Using the GNU Compilers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes-and-hints" class="md-nav__link">
    <span class="md-ellipsis">
      Notes and Hints
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/sdsc-scicomp/expanse-docs/edit/main/docs/compiling_codes.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="compiling-codes">Compiling Codes</h1>
<p>Expanse CPU nodes have GNU, Intel, and AOCC (AMD) compilers available along with multiple MPI implementations (OpenMPI, MVAPICH2, and IntelMPI). The majority of the applications on <em>Expanse</em> have been built using gcc/10.2.0 which features AMD Rome specific optimization flags (-march=znver2). Users should evaluate their application for best compiler and library selection. GNU, Intel, and AOCC compilers all have flags to support Advanced Vector Extensions 2 (AVX2). Using AVX2, up to eight floating point operations can be executed per cycle per core, potentially doubling the performance relative to non-AVX2 processors running at the same clock speed. Note that AVX2 support is not enabled by default and compiler flags must be set as described below.</p>
<p>Expanse GPU nodes have GNU, Intel, and PGI compilers available along with multiple MPI implementations (OpenMPI, IntelMPI, and MVAPICH2). The gcc/10.2.0, Intel, and PGI compilers have specific flags for the Cascade Lake architecture. Users should evaluate their application for best compiler and library selections.</p>
<p>Note that the login nodes are not the same as the GPU nodes, therefore all GPU codes must be compiled by requesting an interactive session on the GPU nodes.</p>
<h3 id="using-amd-compilers">Using AMD Compilers</h3>
<p>The AMD Optimizing C/C++ Compiler (AOCC) is only available on CPU nodes. AMD compilers can be loaded by executing the following commands at the Linux prompt:</p>
<pre><code class="language-bash">module load aocc
</code></pre>
<p>For more information on the AMD compilers: <code>[flang | clang ] -help</code></p>
<table>
<thead>
<tr>
<th></th>
<th>Serial</th>
<th>MPI</th>
<th>OpenMP</th>
<th>MPI+OpenMP</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fortran</td>
<td><code>flang</code></td>
<td><code>mpif90</code></td>
<td><code>ifort -mp</code></td>
<td><code>mpif90 -fopenmp</code></td>
</tr>
<tr>
<td>C</td>
<td><code>clang</code></td>
<td><code>mpiclang</code></td>
<td><code>icc -lomp</code></td>
<td><code>mpicc -fopenmp</code></td>
</tr>
<tr>
<td>C++</td>
<td><code>clang++</code></td>
<td><code>mpiclang</code></td>
<td><code>icpc -lomp</code></td>
<td><code>mpicxx -fopenmp</code></td>
</tr>
</tbody>
</table>
<h3 id="using-the-intel-compilers">Using the Intel Compilers</h3>
<p>The Intel compilers and the MVAPICH2 MPI compiler wrappers can be loaded by executing the following commands at the Linux prompt:</p>
<pre><code class="language-bash">module load intel mvapich2
</code></pre>
<p>For AVX2 support, compile with the <code>-march=core-avx2</code> option. Note that this flag alone does not enable aggressive optimization, so compilation with <code>-O3</code> is also suggested.
Intel MKL libraries are available as part of the "intel" modules on <em>Expanse</em>. Once this module is loaded, the environment variable INTEL_MKLHOME points to the location of the mkl libraries. The <a href="https://software.intel.com/en-us/articles/intel-mkl-link-line-advisor">MKL link advisor</a> can be used to ascertain the link line (change the INTEL_MKLHOME aspect appropriately).
For example to compile a C program statically linking 64 bit scalapack libraries on <em>Expanse</em> :</p>
<pre><code class="language-bash">mpicc -o pdpttr.exe pdpttr.c \
    -I$INTEL_MKLHOME/mkl/include \
    ${INTEL_MKLHOME}/mkl/lib/intel64/libmkl_scalapack_lp64.a \
    -Wl,--start-group ${INTEL_MKLHOME}/mkl/lib/intel64/libmkl_intel_lp64.a \
    ${INTEL_MKLHOME}/mkl/lib/intel64/libmkl_core.a \
    ${INTEL_MKLHOME}/mkl/lib/intel64/libmkl_sequential.a \
    -Wl,--end-group ${INTEL_MKLHOME}/mkl/lib/intel64/libmkl_blacs_intelmpi_lp64.a \
    -lpthread -lm
</code></pre>
<p>For more information on the Intel compilers: <code>[ifort | icc | icpc] -help</code></p>
<table>
<thead>
<tr>
<th></th>
<th>Serial</th>
<th>MPI</th>
<th>OpenMP</th>
<th>MPI+OpenMP</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fortran</td>
<td><code>ifort</code></td>
<td><code>mpif90</code></td>
<td><code>ifort -qopenmp</code></td>
<td><code>mpif90 -qopenmp</code></td>
</tr>
<tr>
<td>C</td>
<td><code>icc</code></td>
<td><code>mpicc</code></td>
<td><code>icc -qopenmp</code></td>
<td><code>mpicc -qopenmp</code></td>
</tr>
<tr>
<td>C++</td>
<td><code>icpc</code></td>
<td><code>mpicxx</code></td>
<td><code>icpc -qopenmp</code></td>
<td><code>mpicxx -qopenmp</code></td>
</tr>
</tbody>
</table>
<h3 id="using-the-pgi-compilers">Using the PGI Compilers</h3>
<p>The PGI compilers are only available on the GPU nodes, and can be loaded by executing the following commands at the Linux prompt</p>
<pre><code class="language-bash">module load pgi
</code></pre>
<p>Note that the openmpi build is integrated into the PGI install so the above module load provides both PGI and openmpi.
For AVX support, compile with <code>-fast</code>.
For more information on the PGI compilers: <code>man [pgf90 | pgcc | pgCC]</code></p>
<table>
<thead>
<tr>
<th></th>
<th>Serial</th>
<th>MPI</th>
<th>OpenMP</th>
<th>MPI+OpenMP</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fortran</td>
<td><code>pgf90</code></td>
<td><code>mpif90</code></td>
<td><code>pgf90 -mp</code></td>
<td><code>mpif90 -mp</code></td>
</tr>
<tr>
<td>C</td>
<td><code>pgcc</code></td>
<td><code>mpicc</code></td>
<td><code>pgcc -mp</code></td>
<td><code>mpicc -mp</code></td>
</tr>
<tr>
<td>C++</td>
<td><code>pgCC</code></td>
<td><code>mpicxx</code></td>
<td><code>pgCC -mp</code></td>
<td><code>mpicxx -mp</code></td>
</tr>
</tbody>
</table>
<h3 id="using-the-gnu-compilers">Using the GNU Compilers</h3>
<p>The GNU compilers can be loaded by executing the following commands at the Linux prompt:</p>
<pre><code class="language-bash">module load gcc openmpi
</code></pre>
<p>For AVX support, compile with -march=core-avx2. Note that AVX support is only available in version 4.7 or later, so it is necessary to explicitly load the gnu/4.9.2 module until such time that it becomes the default.
For more information on the GNU compilers: <code>man [gfortran | gcc | g++]</code></p>
<table>
<thead>
<tr>
<th></th>
<th>Serial</th>
<th>MPI</th>
<th>OpenMP</th>
<th>MPI+OpenMP</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fortran</td>
<td><code>gfortran</code></td>
<td><code>mpif90</code></td>
<td><code>gfortran -fopenmp</code></td>
<td><code>mpif90 -fopenmp</code></td>
</tr>
<tr>
<td>C</td>
<td><code>gcc</code></td>
<td><code>mpicc</code></td>
<td><code>gcc -fopenmp</code></td>
<td><code>mpicc -fopenmp</code></td>
</tr>
<tr>
<td>C++</td>
<td><code>g++</code></td>
<td><code>mpicxx</code></td>
<td><code>g++ -fopenmp</code></td>
<td><code>mpicxx -fopenmp</code></td>
</tr>
</tbody>
</table>
<h3 id="notes-and-hints">Notes and Hints</h3>
<ul>
<li>The mpif90, mpicc, and mpicxx commands are actually wrappers that call the appropriate serial compilers and load the correct MPI libraries. While the same names are used for the Intel, PGI and GNU compilers, keep in mind that these are completely independent scripts.</li>
<li>If you use the PGI or GNU compilers or switch between compilers for different applications, make sure that you load the appropriate modules before running your executables.</li>
<li>When building OpenMP applications and moving between different compilers, one of the most common errors is to use the wrong flag to enable handling of OpenMP directives. Note that Intel, PGI, and GNU compilers use the -qopenmp, -mp, and -fopenmp flags, respectively.</li>
<li>Explicitly set the optimization level in your makefiles or compilation scripts. Most well written codes can safely use the highest optimization level (-O3), but many compilers set lower default levels (e.g. GNU compilers use the default -O0, which turns off all optimizations).</li>
<li>Turn off debugging, profiling, and bounds checking when building executables intended for production runs as these can seriously impact performance. These options are all disabled by default. The flag used for bounds checking is compiler dependent, but the debugging (-g) and profiling (-pg) flags tend to be the same for all major compilers.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../javascripts/extra.js"></script>
      
    
  </body>
</html>